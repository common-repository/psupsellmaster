!function(e){var t;(t={attributes:{},events:{onDocumentReady:function e(){t.functions.maybeOpenModal()},onSubmitNewsletter:function t(s){s.preventDefault();var n=e("#psupsellmaster-modal-newsletter"),a=n.find(".psupsellmaster-modal-field").val(),o={nonce:PsUpsellmaster.attributes.ajax.nonce,action:"psupsellmaster_ajax_newsletter_subscribe",email:a},l=n.find(".psupsellmaster-backdrop-spinner");l.show(),e.ajax({url:PsUpsellmaster.attributes.ajax.url,type:"POST",dataType:"JSON",data:o,success:function(){e(".psupsellmaster-modal-form").hide(),e(".psupsellmaster-modal-ajax-success").show(),window.setTimeout(function(){PsUpsellmasterAdminModal.functions.closeModal(n),e(".psupsellmaster-modal-ajax-success").hide(),e(".psupsellmaster-modal-form").show()},5e3)},error:function(t,s,n){var a=e(".psupsellmaster-modal-ajax-error");a.show(),setTimeout(function(){a.hide()},3e3)},complete:function(e,t){l.hide()}})}},functions:{init:function e(){t.functions.registerEvents()},maybeOpenModal:function t(){var s=e("#psupsellmaster-modal-newsletter");if(0!==s.length)"true"===s.attr("data-auto")&&window.setTimeout(function(){PsUpsellmasterAdminModal.functions.openModal(s)},5e3)},registerEvents:function s(){e(t.events.onDocumentReady),e(document).on("submit","#psupsellmaster-modal-newsletter .psupsellmaster-modal-form",t.events.onSubmitNewsletter)}}}).functions.init()}(jQuery);