!function(e){var t;(t={attributes:{},events:{onChangeAnyLocationsSectionField:function e(a){t.functions.updateLocationTabsCount()},onChangeAnyProductField:function t(a){e(document).trigger("change.psupsellmaster.section-products")},onChangeAnyProductFieldSelect2:function e(a){t.functions.updateProductTabsCount()},onChangeAnyConditionFieldSelect2:function e(a){t.functions.updateConditionTabsCount()},onChangeFieldCouponsFlag:function t(a){var s=e(this),n=s.val(),l=s.closest(".psupsellmaster-form-rows").find(".psupsellmaster-form-warning"),i=s.closest(".psupsellmaster-subsection-coupons"),r=i.find(".psupsellmaster-form-field-coupon-code"),o=i.find(".psupsellmaster-form-field-standard-coupon-id");"campaign"===n?(l.hide(),o.hide(),r.show()):(l.show(),r.hide(),o.show())},onChangeFieldLocations:function e(a){t.functions.updateLocationTabsDisplay()},onChangeFieldLocationsFlag:function e(a){t.functions.maybeToggleLocationOptions(),t.functions.updateLocationTabsDisplay()},onChangeFieldProductsFlag:function e(a){t.functions.maybeToggleProductOptions()},onChangeSectionProducts:function e(a){clearTimeout(t.timers.datatables.main),t.functions.setDataTableSource("preview"),t.timers.datatables.main=setTimeout(function(){t.functions.reloadDataTable()},2500)},onClickBtnAssignTags:function a(s){var n=e(this),l=n.closest(".psupsellmaster-form-btn").find(".spinner");t.functions.assignTags({callbacks:{beforeSend:function(){n.prop("disabled",!0),l.addClass("is-active")},complete:function(){t.functions.reloadDataTable(),n.prop("disabled",!1),l.removeClass("is-active")}}})},onClickBtnConfirmDeleteCampaign:function t(a){var s=e(this),n=s.closest(".psupsellmaster-action").find(".psupsellmaster-btn-delete-campaign");s.is(":checked")?n.prop("disabled",!1):n.prop("disabled",!0)},onClickBtnCopyBannerURL:function t(a){a.preventDefault();var s=e(this).closest(".psupsellmaster-form-field").find(".psupsellmaster-field-banner-url");PsUpsellmaster.functions.copyToClipboard(s.val())},onClickBtnDataTableRefresh:function e(a){a.preventDefault(),t.functions.setDataTableSource("preview"),t.functions.reloadDataTable()},onClickBtnDeleteCampaign:function a(s){s.preventDefault();var n=e(this).attr("data-campaign-id");t.functions.deleteCampaigns(Array(n))},onClickBtnDuplicateCampaign:function a(s){s.preventDefault();var n=e(this).attr("data-campaign-id");t.functions.duplicateCampaigns(Array(n))},onClickBtnSelectBanner:function a(s){s.preventDefault();var n=e(this),l={button:{title:t.data.texts.wp_media_btn_title},multiple:!1,title:t.data.texts.wp_media_frame_title},i=wp.media(l);i.on("select",function(){t.events.onSelectBanner(i,n)}),i.open()},onClickBtnRemoveBanner:function a(s){s.preventDefault();var n=e(this),l=n.closest(".psupsellmaster-form-field");l.find(".psupsellmaster-field-banner-id").val(""),l.find(".psupsellmaster-field-banner-url").val("");var i=l.attr("data-banner-type"),r=n.closest(".psupsellmaster-form-edit-campaign").find(".psupsellmaster-defaults"),o=r.find(".psupsellmaster-default-"+i+"-banner-url").val(),p=r.find(".psupsellmaster-default-banner-title").val(),c=r.find(".psupsellmaster-default-"+i+"-banner-height").val(),u=r.find(".psupsellmaster-default-"+i+"-banner-width").val();l.find(".psupsellmaster-banner-image").attr("src",o),l.find(".psupsellmaster-banner-image").attr("alt",p),l.find(".psupsellmaster-banner-image").attr("height",c),l.find(".psupsellmaster-banner-image").attr("width",u),t.functions.updateLocationTabsCount()},onClickBtnUnassignPostTerm:function a(s){s.preventDefault();var n,l=e(this),i=l.attr("data-post-id"),r={postId:i,taxonomy:l.attr("data-taxonomy"),termIds:Array(l.attr("data-term-id")),callbacks:{success:function(e){l.closest(".psupsellmaster-item").remove()}}};t.functions.unassignPostTerms(r)},onClickRepeaterBtnAdd:function a(s){s.preventDefault();var n=e(this).closest(".psupsellmaster-repeater");t.functions.addRepeaterRow(n)},onClickConditionRepeaterBtnRemove:function a(s){s.preventDefault();var n=e(this).closest(".psupsellmaster-repeater-row");t.functions.removeRepeaterRow(n),t.functions.updateConditionTabsCount()},onClickProductRepeaterBtnRemove:function a(s){s.preventDefault();var n=e(this).closest(".psupsellmaster-repeater-row");t.functions.removeRepeaterRow(n),t.functions.updateProductTabsCount(),e(document).trigger("change.psupsellmaster.section-products")},onClickRowActionExclude:function a(s){s.preventDefault();var n=e(this).closest(".psupsellmaster-col"),l=n.find(".psupsellmaster-field-product-id").val(),i=n.find(".psupsellmaster-field-product-title").val(),r=e('.psupsellmaster-tab-section[data-entity="products"]').find('.psupsellmaster-tab-section[data-type="exclude"]').find(".psupsellmaster-repeater"),o=r.find(".psupsellmaster-repeater-row"),p=!1;if(o.each(function(){0!==e(this).find(".psupsellmaster-field").find('option[value="'+l+'"]:selected').length&&(p=!0)}),!p){var c=r.find(".psupsellmaster-repeater-row").last(),u=c.find(".psupsellmaster-field");u.val()&&(t.functions.addRepeaterRow(r),u=(c=r.find(".psupsellmaster-repeater-row").last()).find(".psupsellmaster-field"));var d=e('.psupsellmaster-field-products-flag[value="selected"]');d.prop("checked")||d.prop("checked",!0).trigger("change");var f=e("<option>",{value:l,text:i});u.append(f),u.val(l).trigger("change")}},onDataTableAjaxData:function a(s,n){var l=e(".psupsellmaster-product-selector");return s=e.extend(!0,s,{action:"psupsellmaster_ajax_get_campaign_eligible_products",nonce:PsUpsellmaster.attributes.ajax.nonce,campaign_id:e("#psupsellmaster-field-campaign-id").val(),options:t.functions.getProductSelectorOptions(l),source:e(".psupsellmaster-datatable-wrapper").attr("data-source")})},onDataTableAjaxDataSrc:function e(t){return t.datatables&&t.datatables.main?(t.draw=t.datatables.main.draw||0,t.recordsTotal=t.datatables.main.total||0,t.recordsFiltered=t.datatables.main.filtered||0,t.datatables.main.data||t.datatables.main):t},onDataTableCreatedCell:function t(a){e(a).addClass("psupsellmaster-datatable-col")},onDataTableCreatedRow:function t(a){e(a).addClass("psupsellmaster-datatable-row")},onDataTableExportFormatBody:function t(a,s,n,l){var i=e("<div>").html(a);i.find(".psupsellmaster-ignore-on-export").remove();var r=i.text();return(r=r.replace(/^\s*\n/gm,"")).trim()},onDataTableInitComplete:function a(s){e(".psupsellmaster-datatable-wrapper .buttons-copy").html('<i class="fa fa-copy"></i>&nbsp;'+t.data.texts.datatable_btn_copy),e(".psupsellmaster-datatable-wrapper .buttons-csv").html('<i class="fa fa-file-csv"></i>&nbsp;'+t.data.texts.datatable_btn_csv),e(".psupsellmaster-datatable-wrapper .buttons-excel").html('<i class="fa fa-file-excel"></i>&nbsp;'+t.data.texts.datatable_btn_excel),e(".psupsellmaster-datatable-wrapper .buttons-print").html('<i class="fa fa-print"></i>&nbsp;'+t.data.texts.datatable_btn_print);var n=e(".psupsellmaster-datatable").closest(".psupsellmaster-datatable-wrapper"),l=n.find(".psupsellmaster-extra-buttons").detach();n.find(".dt-buttons").prepend(l),l.show(),e(document).trigger("psupsellmaster-datatable-init-complete")},onDocumentReady:function e(){t.functions.registerDynamicEvents(),t.functions.startPikadayFields(),t.functions.startDataTables(),t.functions.startTabs(),setTimeout(function(){t.functions.updateProductTabsCount(),t.functions.updateConditionTabsCount(),t.functions.updateLocationTabsCount(),t.functions.updateLocationTabsDisplay()},2e3)},onInputIntegerMaxAmount:function t(a){var s=e(a.target);if(!(!s.is('[type="number"]')||s.is('[max="*"]'))&&"number"==typeof(max=parseInt(s.attr("max")))){var n=parseInt(s.val());"number"==typeof n&&n>max&&s.val(max)}},onInputIntegerMinAmount:function t(a){var s=e(a.target);if(!(!s.is('[type="number"]')||s.is('[min="*"]'))&&"number"==typeof(min=parseInt(s.attr("min")))){var n=parseInt(s.val());"number"==typeof n&&n<min&&s.val(min)}},onKeypressIntegerAmount:function e(t){return -1<["0","1","2","3","4","5","6","7","8","9"].indexOf(t.key)},onSelectBanner:function e(a,s){var n=a.state().get("selection").first().toJSON(),l=s.closest(".psupsellmaster-form-field");l.find(".psupsellmaster-field-banner-id").val(n.id),l.find(".psupsellmaster-field-banner-url").val(n.url),l.find(".psupsellmaster-banner-image").attr("src",n.url);var i=n.alt||n.title||n.filename;l.find(".psupsellmaster-banner-image").attr("alt",i),l.find(".psupsellmaster-banner-image").attr("height",n.height),l.find(".psupsellmaster-banner-image").attr("width",n.width),t.functions.updateLocationTabsCount()},onTabsBeforeActivate:function a(s,n){if("reset"===n.newTab.attr("data-action")){s.preventDefault();var l=e(this).closest(".psupsellmaster-tabs"),i=l.attr("data-key");l.children(".psupsellmaster-tab-section").each(function(){var a=e(this);["conditions","products"].includes(i)?(t.functions.resetRepeaters(a),t.functions.resetFields(a)):"locations"===i&&t.functions.resetFields(a),t.functions.updateTabsMeta(i)})}}},functions:{addRepeaterRow:function e(a){var s=a.find(".psupsellmaster-repeater-row").last();PsUpsellmaster.select2.functions.destroyAll({container:s});var n=s.clone();t.functions.resetFields(n);var l=t.functions.getHighestRepeaterIndex(a);t.functions.updateRowIndex(n,l+1),a.find(".psupsellmaster-repeater-rows").append(n),PsUpsellmaster.select2.functions.refreshAll({container:s}),PsUpsellmaster.select2.functions.refreshAll({container:n})},assignTags:function a(s){var n=e(".psupsellmaster-product-selector"),l=t.functions.getProductSelectorOptions(n);if(l){var i={};if(e(".psupsellmaster-subsection-assign-tags .psupsellmaster-field").each(function(){var t=e(this),a=t.val();a&&(i[t.attr("data-taxonomy")]=a)}),i){var r={action:"psupsellmaster_ajax_assign_multiple_product_terms",nonce:PsUpsellmaster.attributes.ajax.nonce,selectors:l,taxonomies:i};e.ajax({type:"post",url:PsUpsellmaster.attributes.ajax.url,data:r,beforeSend:function(e){s.callbacks&&s.callbacks.beforeSend&&s.callbacks.beforeSend(e)},success:function(e){s.callbacks&&s.callbacks.success&&s.callbacks.success(e)},error:function(e,t,a){s.callbacks&&s.callbacks.error&&s.callbacks.error(e,t,a)},complete:function(e,t){s.callbacks&&s.callbacks.complete&&s.callbacks.complete(e,t)}})}}},deleteCampaigns:function t(a){var s={action:"psupsellmaster_ajax_delete_campaigns",nonce:PsUpsellmaster.attributes.ajax.nonce,ids:a};e.ajax({type:"post",url:PsUpsellmaster.attributes.ajax.url,data:s,beforeSend:function(e){},success:function(e){e.redirect&&1===a.length&&(window.location=e.redirect)},error:function(e,t,a){},complete:function(e,t){}})},duplicateCampaigns:function t(a){var s={action:"psupsellmaster_ajax_duplicate_campaigns",nonce:PsUpsellmaster.attributes.ajax.nonce,ids:a};e.ajax({type:"post",url:PsUpsellmaster.attributes.ajax.url,data:s,beforeSend:function(e){},success:function(e){e.redirect&&1===a.length&&window.open(e.redirect,"_blank")},error:function(e,t,a){},complete:function(e,t){}})},getHighestRepeaterIndex:function t(a){var s=0;return a.find(".psupsellmaster-repeater-row").each(function(){var t=parseInt(e(this).attr("data-index"));t>s&&(s=t)}),s},getProductSelectorOptions:function t(a){var s={authors:{},prices:{},products:{},products_flag:!1,products_type:!1,taxonomies:{}},n=a.find(".psupsellmaster-field-products-flag:checked");s.products_flag=n.val().trim();var l=a.find(".psupsellmaster-form-options"),i=l.find(".psupsellmaster-field-products-type");s.products_type=!!i.is(":checked")&&i.val().trim();var r=l.find('.psupsellmaster-tab-section[data-entity="authors"]'),o=r.find('.psupsellmaster-tab-section[data-type="include"]'),p=r.find('.psupsellmaster-tab-section[data-type="exclude"]');s.authors={include:o.find(".psupsellmaster-select2").map(function(){return parseInt((e(this).val()||"").trim())}).get().filter(Number),exclude:p.find(".psupsellmaster-select2").map(function(){return parseInt((e(this).val()||"").trim())}).get().filter(Number)};var c=l.find(".psupsellmaster-field-prices-min"),u=l.find(".psupsellmaster-field-prices-max");s.prices={min:parseFloat(c.val().trim())||"",max:parseFloat(u.val().trim())||""};var d=l.find('.psupsellmaster-tab-section[data-entity="products"]'),f=d.find('.psupsellmaster-tab-section[data-type="include"]'),m=d.find('.psupsellmaster-tab-section[data-type="exclude"]');return s.products={include:f.find(".psupsellmaster-select2").map(function(){return parseInt((e(this).val()||"").trim())}).get().filter(Number),exclude:m.find(".psupsellmaster-select2").map(function(){return parseInt((e(this).val()||"").trim())}).get().filter(Number)},l.find('.psupsellmaster-tab-section[data-entity="taxonomies"]').each(function(){var t=e(this),a=t.attr("data-taxonomy"),n=t.find('.psupsellmaster-tab-section[data-type="include"]'),l=t.find('.psupsellmaster-tab-section[data-type="exclude"]');s.taxonomies[a]={include:n.find(".psupsellmaster-select2").map(function(){return parseInt((e(this).val()||"").trim())}).get().filter(Number),exclude:l.find(".psupsellmaster-select2").map(function(){return parseInt((e(this).val()||"").trim())}).get().filter(Number)}}),s},init:function e(){t.functions.registerAttributes(),t.functions.registerEvents(),t.functions.run()},maybeToggleLocationOptions:function t(){var a=e(".psupsellmaster-section-locations").find(".psupsellmaster-field-locations-flag:checked"),s=a.val(),n=a.closest(".psupsellmaster-form-group").find(".psupsellmaster-form-options");if("all"===s){n.hide();return}n.show()},maybeToggleProductOptions:function t(){var a=e(".psupsellmaster-subsection-products-selection"),s=a.find(".psupsellmaster-field-products-flag:checked").val(),n=a.find(".psupsellmaster-form-options");if("all"===s){n.hide();return}n.show()},registerAttributes:function a(){"undefined"!=typeof psupsellmaster_admin_data_campaigns_edit&&(t.data=psupsellmaster_admin_data_campaigns_edit),t.timers={datatables:{main:{}}},t.settings={datatables:{default:{},custom:{main:{}}}},t.settings.datatables.default={ajax:{data:t.events.onDataTableAjaxData,dataSrc:t.events.onDataTableAjaxDataSrc,type:"POST",url:PsUpsellmaster.attributes.ajax.url},buttons:[{className:"button",extend:"copyHtml5",exportOptions:{format:{body:t.events.onDataTableExportFormatBody}}},{className:"button",extend:"print",exportOptions:{format:{body:t.events.onDataTableExportFormatBody}}},{className:"button",extend:"csvHtml5",exportOptions:{format:{body:t.events.onDataTableExportFormatBody}}},{className:"button",extend:"excelHtml5",exportOptions:{format:{body:t.events.onDataTableExportFormatBody}}},],columnDefs:[{className:"dt-body-left",targets:[0,1,2]},{orderable:!1,targets:[2]},{createdCell:t.events.onDataTableCreatedCell,targets:"_all"},],createdRow:t.events.onDataTableCreatedRow,displayLength:10,dom:"Bfliptip",filter:!0,initComplete:t.events.onDataTableInitComplete,oLanguage:{sLengthMenu:t.data.texts.datatable_length},order:[[0,"asc"]],pageLength:10,lengthMenu:[[10,25,50,100,250,1e3],[10,25,50,100,250,1e3],],paginate:!0,pagingType:"full_numbers",serverSide:!0,responsive:{details:{target:".psupsellmaster-toggle-details",type:"column"}}},t.settings.datatables.custom.main=e.extend(!0,{},t.settings.datatables.default),t.instances={datatables:{main:null}}},registerDynamicEvents:function a(){e(".psupsellmaster-section-locations .psupsellmaster-field-description").each(function(){var a=e(this),s=tinymce.get(a.attr("id"));if(!s)return!0;s.on("change",t.events.onChangeAnyLocationsSectionField)})},registerEvents:function a(){e(t.events.onDocumentReady),e(document).on("click",".psupsellmaster-section-promotion-conditions .psupsellmaster-repeater-btn-add",t.events.onClickRepeaterBtnAdd),e(document).on("click",".psupsellmaster-subsection-products-selection .psupsellmaster-repeater-btn-add",t.events.onClickRepeaterBtnAdd),e(document).on("click",".psupsellmaster-section-promotion-conditions .psupsellmaster-repeater-btn-remove",t.events.onClickConditionRepeaterBtnRemove),e(document).on("click",".psupsellmaster-subsection-products-selection .psupsellmaster-repeater-btn-remove",t.events.onClickProductRepeaterBtnRemove),e(document).on("click",".psupsellmaster-subsection-assign-tags .psupsellmaster-btn-assign-tags",t.events.onClickBtnAssignTags),e(document).on("change",".psupsellmaster-field-coupons-flag",t.events.onChangeFieldCouponsFlag),e(document).on("change",".psupsellmaster-field-products-flag",t.events.onChangeFieldProductsFlag),e(document).on("change",".psupsellmaster-subsection-products-selection .psupsellmaster-select2",t.events.onChangeAnyProductFieldSelect2),e(document).on("change",".psupsellmaster-subsection-products-selection .psupsellmaster-field",t.events.onChangeAnyProductField),e(document).on("change",".psupsellmaster-section-locations .psupsellmaster-field",t.events.onChangeAnyLocationsSectionField),e(document).on("change",".psupsellmaster-section-promotion-conditions .psupsellmaster-select2",t.events.onChangeAnyConditionFieldSelect2),e(document).on("change",".psupsellmaster-field-locations-flag",t.events.onChangeFieldLocationsFlag),e(document).on("change",".psupsellmaster-field-locations",t.events.onChangeFieldLocations),e(document).on("click",".psupsellmaster-btn-select-banner",t.events.onClickBtnSelectBanner),e(document).on("click",".psupsellmaster-btn-copy-banner-url",t.events.onClickBtnCopyBannerURL),e(document).on("click",".psupsellmaster-btn-remove-banner",t.events.onClickBtnRemoveBanner),e(document).on("click",".psupsellmaster-btn-duplicate-campaign",t.events.onClickBtnDuplicateCampaign),e(document).on("click",".psupsellmaster-field-confirm-delete-campaign",t.events.onClickBtnConfirmDeleteCampaign),e(document).on("click",".psupsellmaster-btn-delete-campaign",t.events.onClickBtnDeleteCampaign),e(document).on("click",".psupsellmaster-datatable-wrapper .psupsellmaster-btn-refresh",t.events.onClickBtnDataTableRefresh),e(document).on("change.psupsellmaster.section-products",t.events.onChangeSectionProducts),e(document).on("input",".psupsellmaster-field-priority",t.events.onInputIntegerMaxAmount),e(document).on("input",".psupsellmaster-field-priority",t.events.onInputIntegerMinAmount),e(document).on("keypress",".psupsellmaster-field-priority",t.events.onKeypressIntegerAmount),e(document).on("click",".psupsellmaster-unassign-post-term",t.events.onClickBtnUnassignPostTerm),e(document).on("click",".psupsellmaster-row-actions .psupsellmaster-exclude",t.events.onClickRowActionExclude)},reloadDataTable:function e(){t.instances.datatables.main.ajax.reload()},removeRepeaterRow:function e(a){if(1===a.closest(".psupsellmaster-repeater").find(".psupsellmaster-repeater-row").length){t.functions.resetFields(a),t.functions.updateRowIndex(a),PsUpsellmaster.select2.functions.refreshAll({container:a});return}a.remove()},resetFields:function t(a){var s=a.find("input:not(:checkbox,:radio), select, textarea");s.val(""),s.trigger("change"),(s=a.find("input:checkbox, input:radio")).each(function(){var t=e(this);t.prop("checked","true"===t.attr("data-default-checked"))}),s.trigger("change")},resetRepeater:function e(a){a.find(".psupsellmaster-repeater-row").not(":first").remove();var s=a.find(".psupsellmaster-repeater-row");t.functions.resetFields(s),t.functions.updateRowIndex(s),PsUpsellmaster.select2.functions.refreshAll({container:s})},resetRepeaters:function a(s){s.find(".psupsellmaster-repeater").each(function(){t.functions.resetRepeater(e(this))})},updateConditionTabsCount:function t(){var a=e(".psupsellmaster-section-promotion-conditions");a.find(".psupsellmaster-tabs").first().find(".psupsellmaster-tabs-header").first().find(".psupsellmaster-tab").each(function(){var t=e(this),s=t.find("a").attr("href"),n=a.find(s),l=n.find(".psupsellmaster-tabs-header").first(),i=0;l.find(".psupsellmaster-tab").each(function(){var t=e(this),a=t.find("a").attr("href"),s=n.find(a).find(".psupsellmaster-select2 option:selected:not(:empty)").length;t.find(".psupsellmaster-count").text("("+s+")"),i+=s}),t.find(".psupsellmaster-count").text("("+i+")")})},updateLocationTabsDisplay:function t(){var a=e(".psupsellmaster-section-locations"),s=a.find(".psupsellmaster-field-locations-flag:checked").val(),n=a.find(".psupsellmaster-field-locations").val(),l=a.find(".psupsellmaster-tabs").first(),i=l.find(".psupsellmaster-tabs-header").first();if(i.find(".psupsellmaster-tab").each(function(){var t=e(this),a=t.attr("data-location"),l=!0;"all"===s||0===n.length||"all"===a||n.includes(a)||(l=!1),l?t.show():t.hide()}),i.find(".psupsellmaster-tab.ui-tabs-active").is(":hidden")){var r=i.find(".psupsellmaster-tab:visible").first();l.tabs("option","active",r.index())}},updateLocationTabsCount:function t(){var a=e(".psupsellmaster-section-locations");a.find(".psupsellmaster-tabs-header").first().find(".psupsellmaster-tab").each(function(){var t=e(this),s=t.find("a").attr("href"),n=a.find(s),l=n.find(".psupsellmaster-form-field-description .psupsellmaster-field-description"),i=n.find(".psupsellmaster-form-field-desktop-banner .psupsellmaster-field"),r=n.find(".psupsellmaster-form-field-mobile-banner .psupsellmaster-field"),o=n.find(".psupsellmaster-form-field-desktop-banner-link-url .psupsellmaster-field"),p=n.find(".psupsellmaster-form-field-mobile-banner-link-url .psupsellmaster-field"),c=!1;(c=(c=(c=(c=(c=c||!!tinymce.get(l.attr("id")).getContent().trim())||!!parseInt(i.val()))||!!parseInt(r.val()))||!!o.val().trim())||!!p.val().trim())?t.find(".psupsellmaster-count").text("(+)"):t.find(".psupsellmaster-count").text("")})},updateProductTabsCount:function t(){var a=e(".psupsellmaster-subsection-products-selection");a.find(".psupsellmaster-form-options").find(".psupsellmaster-tabs-header").first().find(".psupsellmaster-tab").each(function(){var t=e(this),s=t.find("a").attr("href"),n=a.find(s),l=n.find(".psupsellmaster-tabs-header").first(),i=0;l.find(".psupsellmaster-tab").each(function(){var t=e(this),a=t.find("a").attr("href"),s=n.find(a).find(".psupsellmaster-select2 option:selected:not(:empty)").length;t.find(".psupsellmaster-count").text("("+s+")"),i+=s}),t.find(".psupsellmaster-count").text("("+i+")")})},updateRowIndex:function t(a,s=0){a.attr("data-index",s),a.find("input, select, textarea").each(function(){var t=e(this),a=t.attr("id");a&&(a=a.replace(/(\d+)/,s),t.attr("id",a));var n=t.attr("name");n&&(n=n.replace(/\[(\d+)\]/,"["+s+"]"),t.attr("name",n))})},updateTabsMeta:function e(a){"conditions"===a?t.functions.updateConditionTabsCount():"locations"===a?(t.functions.updateLocationTabsCount(),t.functions.updateLocationTabsDisplay()):"products"===a&&t.functions.updateProductTabsCount()},run:function t(){e(".psupsellmaster-section-general .psupsellmaster-form-field-title .psupsellmaster-field").trigger("focus")},setDataTableSource:function t(a){e(".psupsellmaster-datatable-wrapper").attr("data-source",a)},startDataTables:function a(){t.instances.datatables.main=e("#psupsellmaster-datatable-eligible-products").DataTable(t.settings.datatables.custom.main)},startPikadayFields:function a(){e(".psupsellmaster-field-pikaday").each(function(){var a;a=e(this),t.functions.startPikadayField(a)})},startPikadayField:function e(t){var a;a={field:t.get(0),format:"YYYY/MM/DD"},new Pikaday(a)},startTabs:function a(){e(".psupsellmaster-tabs").tabs({beforeActivate:t.events.onTabsBeforeActivate}),e(".psupsellmaster-tabs").show()},unassignPostTerms:function t(a){var s={action:"psupsellmaster_ajax_unassign_post_terms",nonce:PsUpsellmaster.attributes.ajax.nonce,post_id:a.postId,taxonomy:a.taxonomy,term_ids:a.termIds};e.ajax({type:"post",url:PsUpsellmaster.attributes.ajax.url,data:s,beforeSend:function(e){a.callbacks&&a.callbacks.beforeSend&&a.callbacks.beforeSend(e)},success:function(e){a.callbacks&&a.callbacks.success&&a.callbacks.success(e)},error:function(e,t,s){a.callbacks&&a.callbacks.error&&a.callbacks.error(e,t,s)},complete:function(e,t){a.callbacks&&a.callbacks.complete&&a.callbacks.complete(e,t)}})}}}).functions.init()}(jQuery);