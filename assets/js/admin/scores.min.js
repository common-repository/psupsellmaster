var PsUpsellmasterAdminScores;!function(s){(PsUpsellmasterAdminScores={attributes:{},events:{onClickCloseScoresDetails:function e(t){t.preventDefault(),s(this).closest(".psupsellmaster-tooltip-upsell").remove()},onClickOpenScoresDetails:function e(t){t.preventDefault();var a=s(this),n=a.data("base-product-id"),o=a.data("upsell-product-id"),r={action:"psupsellmaster_ajax_get_upsell_product_scores",nonce:PsUpsellmaster.attributes.ajax.nonce,base_product_id:n,upsell_product_id:o};s.ajax({type:"get",url:PsUpsellmaster.attributes.ajax.url,data:r,beforeSend:function(e){s(a).parent().find(".psupsellmaster-tooltip-upsell").remove(),s(a).parent().append('<div class="psupsellmaster-tooltip-upsell"><span class="spinner is-active"></span></div>')},success:function(e){s(a).parent().find(".psupsellmaster-tooltip-upsell").html(e)},error:function(e,t,n){s(a).parent().find(".psupsellmaster-tooltip-upsell").remove()}})}},functions:{init:function s(){PsUpsellmasterAdminScores.functions.registerEvents()},getBackgroundProcessStatus:function e(){var t=s(".psupsellmaster-scores-progress"),a={action:"psupsellmaster_bp_ajax_get_scores_status",nonce:PsUpsellmaster.attributes.ajax.nonce};s.ajax({url:PsUpsellmaster.attributes.ajax.url,type:"post",dataType:"json",data:a}).done(function(e){e.success&&void 0!==e.html&&t.html(e.html),"none"!==e.status&&setTimeout(function(){PsUpsellmasterAdminScores.functions.getBackgroundProcessStatus()},5e3),s(document).trigger("psupsellmaster-get-bp-scores-status",e)})},registerEvents:function e(){s(document).on("click",".psupsellmaster-open-scores-details",PsUpsellmasterAdminScores.events.onClickOpenScoresDetails),s(document).on("click",".psupsellmaster-close-scores-details",PsUpsellmasterAdminScores.events.onClickCloseScoresDetails)},startBackgroundProcess:function e(t={}){var a={action:"psupsellmaster_bp_ajax_enqueue_scores",nonce:PsUpsellmaster.attributes.ajax.nonce};t.products&&(a.products=t.products),s.ajax({url:PsUpsellmaster.attributes.ajax.url,type:"post",dataType:"json",data:a}).done(function(s){PsUpsellmasterAdminScores.functions.getBackgroundProcessStatus()})},stopBackgroundProcess:function e(){var t={action:"psupsellmaster_bp_ajax_scores_stop",nonce:PsUpsellmaster.attributes.ajax.nonce};s.ajax({url:PsUpsellmaster.attributes.ajax.url,type:"post",dataType:"json",data:t})}}}).functions.init()}(jQuery);