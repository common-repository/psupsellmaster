!function(e,s){var t;(t={attributes:{},events:{onClickBtnClearResults:function s(t){var n;(n=e("body")).addClass("psupsellmaster-modal-open"),n.addClass("psupsellmaster-modal-clear-results")},onClickBtnClearResultsCancel:function e(s){s.preventDefault(),tb_remove()},onClickSettingsTabLink:function s(t){var n=e(this),l=n.closest(".psupsellmaster-settings-tab"),a=l.closest("#psupsellmaster-settings-tabs");if(!l.hasClass("psupsellmaster-settings-tab-url")){a.find(".psupsellmaster-settings-tab").removeClass("psupsellmaster-selected"),l.addClass("psupsellmaster-selected");var r=n.attr("href");PsUpsellmaster.functions.setCookie("psupsellmaster-settings-tab",r,7)}},onDocumentReady:function e(){t.functions.startTabs()},onKeyupMaxInt:function s(n){var l=e(this),a=l.attr("max");if(a){var r=l.val();parseInt(a)<parseInt(r)&&(l.val(a),alert(t.attributes.texts.input_max_int.replace("%d",a)))}},onSubmitNewsletter:function s(t){t.preventDefault();var n=e("#psupsellmaster-newsletter"),l=n.find(".psupsellmaster-newsletter-field").val(),a={nonce:PsUpsellmaster.attributes.ajax.nonce,action:"psupsellmaster_ajax_newsletter_subscribe",email:l},r=n.find(".psupsellmaster-backdrop-spinner");r.show(),e.ajax({url:PsUpsellmaster.attributes.ajax.url,type:"POST",dataType:"JSON",data:a,success:function(){n.find(".psupsellmaster-newsletter-form").hide(),n.find(".psupsellmaster-newsletter-ajax-success").show(),setTimeout(function(){n.hide()},3e3),PsUpsellmaster.attributes.plugin.is_lite&&window.location.reload()},error:function(s,t,n){var l=e(".psupsellmaster-newsletter-ajax-error");l.show(),setTimeout(function(){l.hide()},3e3)},complete:function(e,s){r.hide()}})},onTbUnload:function s(){var t;(t=e("body")).removeClass("psupsellmaster-modal-open"),t.removeClass("psupsellmaster-modal-clear-results")}},functions:{init:function e(){t.functions.registerAttributes(),t.functions.registerEvents()},registerAttributes:function e(){"undefined"!=typeof psupsellmaster_admin_data_settings&&(t.attributes=psupsellmaster_admin_data_settings)},registerEvents:function s(){e(t.events.onDocumentReady),e(document).on("click",".psupsellmaster-settings-tab-link",t.events.onClickSettingsTabLink),e(document).on("keyup","#psupsellmaster_number_of_upsell_products",t.events.onKeyupMaxInt),e(document).on("click",".psupsellmaster-btn-clear-results-cancel",t.events.onClickBtnClearResultsCancel),e(document).on("submit","#psupsellmaster-newsletter .psupsellmaster-newsletter-form",t.events.onSubmitNewsletter),e(document).on("tb_unload","#TB_window",t.events.onTbUnload),e("body").on("click",".psupsellmaster-btn-clear-results",t.events.onClickBtnClearResults)},startTabs:function s(){var t=e("#psupsellmaster-settings-tabs"),n={},l=t.find(".psupsellmaster-settings-tab.psupsellmaster-selected");l&&l.length&&(n.active=t.find(".psupsellmaster-settings-tab").index(l)),t.tabs(n),e(".psupsellmaster-settings-tab-url .psupsellmaster-settings-tab-link").unbind("click");var a=PsUpsellmaster.functions.getCookie("psupsellmaster-settings-tab");if(!(!a||new URLSearchParams(window.location.href).has("view"))){var r=t.find('.psupsellmaster-settings-tab-link[href="'+a+'"]');r&&r.trigger("click")}}}}).functions.init()}(jQuery);